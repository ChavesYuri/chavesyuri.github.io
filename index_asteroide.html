<html>
  <head>
    <script src="https://aframe.io/releases/0.9.2/aframe.min.js"></script>
    <script src="https://unpkg.com/aframe-environment-component/dist/aframe-environment-component.min.js"></script>
	<script src="a_frame.js"></script>
	<script>
		var score;
		var scoreVal;
        /**
         * Click mouse to shoot.
         */
        AFRAME.registerComponent('click-to-shoot', {
          init: function () {
            document.body.addEventListener('mousedown', () => { this.el.emit('shoot'); });
          }
        });
        /**
         * Change color when hit.
         */
        AFRAME.registerComponent('hit-handler', {
          dependencies: ['material'],
          init: function () {
            var el = this.el;
           
            el.addEventListener('die', () => {
			scoreVal++;
			score.setAttribute("value", "Score: " + scoreVal);
			el.parentNode.removeChild(el)();
             
             
            });
          }
        });
      </script>  
    
  </head>
  <body>
  <a-scene>
    <a-assets>
    <img id="boxTexture" src="https://chavesyuri.github.io/mc.png">
	<a-asset-item id="bird" response-type="arraybuffer" src="https://cdn.glitch.com/0b8ae619-3a3b-4435-a2ae-6b774916c472%2Fasteroide.glb?v=1575759128452"></a-asset-item>
	<a-asset-item id="arma" response-type="arraybuffer" src="https://cdn.glitch.com/0b8ae619-3a3b-4435-a2ae-6b774916c472%2Farma(1).glb?v=1575754568794"></a-asset-item>
        
    
    
  </a-assets>
	<a-entity environment="preset: starry; dressingAmount: 100 ground:none "></a-entity>
	<a-text value="Score: 0" width="55" id="score" rotation="0 0 0" color="white" position="-9 8.5 -74"
    rotation="0 0 0"></a-text>
    <a-sky src="#skyTexture"></a-sky>
    
 
    
    
    
      
    <!--Iluminacão -->
      <a-light type="ambient" color="#445451"></a-light>
      <a-light type="point" intensity="2" position="2 4 4"></a-light>
    <!-- -->
    
    <!-- Desenha o chão -->

    <!-- -->
  <!-- Out of the box environment! -->
  <!--a-entity environment="preset: forest; dressingAmount: 900"></a-entity-->
   <a-entity id="bulletTemplate" bullet geometry="primitive: sphere; radius: 0.1" material="color: red"></a-entity>

       <a-entity dynamic-body physics-collider="ignoreSleep: true" gltf-model="#bird" scale="0.005 0.005 0.005 " animation-mixer="clip:Take 001; loop:2; timeScale: 5; crossFadeDuration: 1" 
		position="-6 -2 -5" class="target" target="healthPoints: 1" geometry="primitive: box" material="color: teal" 
		animation="property: position;to: -2 8 -8;dir: alternate; dur: 5000; easing: linear; loop: true" hit-handler>			
		</a-entity>

		<a-entity gltf-model="#bird" scale="0.005 0.005 0.005 " animation-mixer="clip:Take 001; loop:2; timeScale: 5; crossFadeDuration: 1" 
		position="9 2 -4" class="target" target="healthPoints: 1" geometry="primitive: box" material="color: teal" animation:"property: position; to: "-2 50 -4" hit-handler>
		</a-entity>
		
		<a-entity gltf-model="#bird" scale="0.005 0.005 0.005 " animation-mixer="clip:Take 001; loop:2; timeScale: 5; crossFadeDuration: 1" 
		position="4 -5 -4" class="target" target="healthPoints: 1" geometry="primitive: box" material="color: teal" animation:"rotation; to: "0 360 0" hit-handler>		
		</a-entity>
			
		
		
		<a-entity dynamic-body physics-collider="ignoreSleep: true" gltf-model="#bird" scale="0.005 0.005 0.005 " animation-mixer="clip:Take 001; loop:2; timeScale: 5; crossFadeDuration: 1" 
		position="-12 2 -40" class="target" target="healthPoints: 1" geometry="primitive: box" material="color: teal" 
		animation="property: position;to: 0 0 -3;dir: alternate; dur: 8000; easing: linear; loop: true" hit-handler>			
		</a-entity>

		<a-entity gltf-model="#bird" scale="0.005 0.005 0.005 " animation-mixer="clip:Take 001; loop:2; timeScale: 5; crossFadeDuration: 1" 
		position="16 2 -13" class="target" target="healthPoints: 1" geometry="primitive: box" material="color: teal" animation:"property: position; to: "-2 7 -4" hit-handler>
		</a-entity>
		
		<a-entity gltf-model="#bird" scale="0.005 0.005 0.005 " animation-mixer="clip:Take 001; loop:2; timeScale: 5; crossFadeDuration: 1" 
		position="13 -3 -26" class="target" target="healthPoints: 1" geometry="primitive: box" material="color: teal" animation:rotation; to: "0 360 0" hit-handler>		
		</a-entity>
		
		
		<a-entity dynamic-body physics-collider="ignoreSleep: true" gltf-model="#bird" scale="0.005 0.005 0.005 " animation-mixer="clip:Take 001; loop:2; timeScale: 5; crossFadeDuration: 1" 
		position="-12 2 -20" class="target" target="healthPoints: 1" geometry="primitive: box" material="color: teal" 
		animation="property: position;to: -2 2 -20;dir: alternate; dur: 11111; easing: linear; loop: true" hit-handler>			
		</a-entity>

		<a-entity gltf-model="#bird" scale="0.005 0.005 0.005 " animation-mixer="clip:Take 001; loop:2; timeScale: 5; crossFadeDuration: 1" 
		position="23 12 -20" class="target" target="healthPoints: 1" geometry="primitive: box" material="color: teal" animation:"property: position; to: "-2 50 -4" hit-handler>
		</a-entity>
		
		<a-entity gltf-model="#bird" scale="0.005 0.005 0.005 " animation-mixer="clip:Take 001; loop:2; timeScale: 5; crossFadeDuration: 1" 
		position="13 12 -20" class="target" target="healthPoints: 1" geometry="primitive: box" material="color: teal" animation:rotation; to: "0 360 0" hit-handler>		
		</a-entity>
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
		
    
        <a-camera id="camera" position="-1 0 0">
          <a-cursor></a-cursor>
           <a-entity gltf-model="#arma" scale="0.008 0.008 0.008" shooter click-to-shoot position="0 -0.23 -0.21"></a-entity>
        </a-camera>
  </a-scene>
    
  </body>
  <script>
     score = document.getElementById("score");
     scoreVal = 0;
  </script>
  
</html>